

# üöÄ User Management API

REST-—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –∑–∞–¥–∞–Ω–∏–µ–º.

> ‚úÖ **–ó–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã** (NestJS –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)  
> ‚úÖ **–†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã**: Express + TypeScript + Prisma (ORM) + PostgreSQL

---

## üìã –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∑–∞–¥–∞–Ω–∏—è

### ‚úÖ –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–¥–µ—Ä–∂–∏—Ç:
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|--------|
| `name` | `String` | –ò–º—è |
| `surname` | `String` | –§–∞–º–∏–ª–∏—è |
| `seconame` | `String` | –û—Ç—á–µ—Å—Ç–≤–æ |
| `dateBirthday` | `String` | –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (`"YYYY-MM-DD"`) |
| `email` | `String` | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π email |
| `password` | `String` | –•—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å |
| `role` | `String` | `"user"` –∏–ª–∏ `"admin"` |
| `status` | `Boolean` | `true` ‚Äî –∞–∫—Ç–∏–≤–µ–Ω, `false` ‚Äî –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω |

> üîê –ü–∞—Ä–æ–ª–∏ —Ö—ç—à–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `bcrypt`.

---

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ endpoint‚Äô—ã

| ‚Ññ | Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –î–æ—Å—Ç—É–ø |
|---|----------|-------|--------|--------|
| 1 | `/signup` | `POST` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | –í—Å–µ |
| 2 | `/login` | `POST` | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (JWT) | –í—Å–µ |
| 3 | `/user/:id` | `GET` | –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID | –ê–¥–º–∏–Ω **–∏–ª–∏** —Å–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |
| 4 | `/users` | `GET` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω |
| 5 | `/user/:id/block` | `PATCH` | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`status = false`) | –ê–¥–º–∏–Ω **–∏–ª–∏** —Å–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |

> üîí –í—Å–µ –∑–∞—â–∏—â—ë–Ω–Ω—ã–µ endpoint‚Äô—ã —Ç—Ä–µ–±—É—é—Ç JWT –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:  
> `Authorization: Bearer <token>`

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: Express.js
- **–Ø–∑—ã–∫**: TypeScript
- **ORM**: Prisma
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ª—é–±–∞—è —á–µ—Ä–µ–∑ Prisma)
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: JWT + `jsonwebtoken`
- **–•—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π**: `bcrypt`
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: Swagger UI (`/api-docs`)
- **–¢–µ—Å—Ç—ã**: Jest + Supertest

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–°–æ–∑–¥–∞–π—Ç–µ `.env`** –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
   ```env
   JWT_SECRET=—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_—Å–µ–∫—Ä–µ—Ç_–º–∏–Ω–∏–º—É–º_64_—Å–∏–º–≤–æ–ª–∞
   DATABASE_URL="postgresql://user:password@localhost:5432/dbname?schema=public"
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
   ```bash
   npm ci
   ```

3. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏**:
   ```bash
   npx prisma migrate dev --name init
   ```

4. **(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏**:
   ```bash
   npx prisma db seed
   ```
   > –°–æ–∑–¥–∞—ë—Ç –∞–¥–º–∏–Ω–∞: `admin@example.com` / `password123`

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä**:
   ```bash
   npm run dev
   ```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger)

–î–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:  
üëâ **[http://localhost:3000/api-docs](http://localhost:3000/api-docs)**

### –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ –∞–¥–º–∏–Ω:

1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `POST /login` —Å:
   ```json
   { "email": "admin@example.com", "password": "password123" }
   ```
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `token` –∏–∑ –æ—Ç–≤–µ—Ç–∞.
3. –í Swagger –Ω–∞–∂–º–∏—Ç–µ **Authorize** ‚Üí –≤–≤–µ–¥–∏—Ç–µ:
   ```
   Bearer –≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
   ```
4. –¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã:
   - `GET /users`
   - `PATCH /user/{id}/block`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
npm test
```

–ü–æ–∫—Ä—ã—Ç—ã —Å—Ü–µ–Ω–∞—Ä–∏–∏:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (—Å–∞–º–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ –∞–¥–º–∏–Ω–æ–º)
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (—Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è –∏ –∞–¥–º–∏–Ω–æ–º)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏)

```
src/
‚îú‚îÄ‚îÄ server.ts              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ app.ts                 # Express app (–±–µ–∑ –ª–æ–≥–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞)
‚îú‚îÄ‚îÄ swagger.ts             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è OpenAPI
‚îú‚îÄ‚îÄ routes/                # –ú–∞—Ä—à—Ä—É—Ç—ã –ø–æ –¥–æ–º–µ–Ω–∞–º
‚îÇ   ‚îú‚îÄ‚îÄ auth.routes.ts
‚îÇ   ‚îú‚îÄ‚îÄ user.routes.ts
‚îÇ   ‚îî‚îÄ‚îÄ post.routes.ts     # (–¥–æ–ø. —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)
‚îî‚îÄ‚îÄ middleware/            # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ª–æ–≥–∏–∫–∞
    ‚îî‚îÄ‚îÄ authenticateToken.ts
tests/                     # –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ unit/integration —Ç–µ—Å—Ç—ã
prisma/                    # –°—Ö–µ–º–∞ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
```

> ‚úÖ –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏  
> ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è  
> ‚úÖ –õ—ë–≥–∫–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üö´ –ß—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ

- NestJS ‚Äî **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á—ë–Ω**
- –õ—é–±—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ –ø–æ–≤–µ—Ä—Ö Express ‚Äî **–Ω–µ –ø—Ä–∏–º–µ–Ω—è–ª–∏—Å—å**

---
